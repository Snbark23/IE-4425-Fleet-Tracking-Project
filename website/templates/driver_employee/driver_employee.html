{% extends "base.html" %}
{% block title %}Driver Employee Portal{% endblock %}
{% block content %}
<h2 class="text-center text-success mb-4">Driver Employee Portal</h2>

<!-- Dashboard Cards -->
<div class="card bg-light shadow mb-4">
  <div class="card-header bg-success text-white"><strong>Driver Dashboard</strong></div>
  <div class="card-body">
    <div class="row text-center">
      {% set kpis = [
        ('Trip Logs', fuel_logs, 'fas fa-gas-pump', 'Total logs submitted'),
        ('Fuel Cost ($)', "%.2f"|format(fuel_cost), 'fas fa-dollar-sign', 'Total spent on fuel'),
        ('Miles Driven', "%.1f"|format(miles), 'fas fa-road', 'Total miles logged'),
        ('Incidents', incidents, 'fas fa-tools', 'Minor issues (e.g. popped tire)'),
        ('Accidents', accidents, 'fas fa-car-crash', 'Involving another party')
      ] %}
      {% for label, value, icon, tooltip in kpis %}
      <div class="col-md-4 col-sm-6 mb-3">
        <div class="card bg-white border shadow-sm p-2 h-100">
          <i class="{{ icon }} fa-2x text-success" data-toggle="tooltip" title="{{ tooltip }}"></i>
          <h6 class="mt-2 font-weight-bold">{{ label }}</h6>
          <h4 class="text-dark">{{ value }}</h4>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>

<!-- Action Buttons -->
<div class="card shadow mb-4">
  <div class="card-header bg-dark text-white"><strong>Quick Actions</strong></div>
  <div class="card-body">
    <div class="row text-center">
      <div class="col-md-3 mb-2">
        <a href="{{ url_for('views.my_assignments') }}" class="btn btn-outline-info w-100">
          <i class="fas fa-clipboard-list mr-1"></i> My Assignments
        </a>
      </div>      
      <div class="col-md-3 mb-2">
        <a href="{{ url_for('views.log_trip') }}" class="btn btn-success w-100">
          <i class="fas fa-route mr-1"></i> Log Trip
        </a>
      </div>
      <div class="col-md-3 mb-2">
        <a href="{{ url_for('views.incident_report') }}" class="btn btn-warning w-100">
          <i class="fas fa-tools mr-1"></i> Report Incident
        </a>
      </div>
      <div class="col-md-3 mb-2">
        <a href="{{ url_for('views.accident_report') }}" class="btn btn-danger w-100">
          <i class="fas fa-car-crash mr-1"></i> Report Accident
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
